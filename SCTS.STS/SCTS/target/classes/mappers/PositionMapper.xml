<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="yjc.wdb.mapper.PositionMapper">

	<!-- 생성된 위치데이터를 db에 저장 현재 고객정보는 빠져 있음 -->
	<insert id="insertPosition">
		insert into tbl_position (major, minor, currentTime, stayTime)
		value(#{major}, #{minor}, #{currentTime}, #{stayTime})
	</insert>
	
	<select id="selectPosition" resultType="PositionVO">
		select *
		from tbl_position
		limit 0,1
		order by num desc
	</select>

	<!-- 나이 연령대에 따른 존 지나간 횟수 구분할 db쿼리문 작성 -->
	<select id="a1" resultType="PositionVO">
		select *
		from tbl_position
	</select>
	
	<!-- 방문율 전체 고객들중, 또는 매장에 방문한 고객들 중에서 해당 존을 지나간 퍼센테이지를 구하여 받아올 쿼리문 -->
	<select id="a2" resultType="PositionVO">
		select *
		from tbl_position
	</select>
	
	<!-- 해당 존에서 고객들이 평균적으로 머무는 시간을 구하여 반환할 수 있는 쿼리문 -->
	<select id="avgStay" resultType="java.util.HashMap">
		select major, minor, avg(stay_time), count(*)
		from position
		group by major, minor;
	</select>
	
	<!-- 날짜 별로 해당 존에 방문하는 고객들의 수를 반환하는 쿼리문 -->
	<select id="a4" resultType="PositionVO">
		select *
		from tbl_position
	</select>
	
</mapper>