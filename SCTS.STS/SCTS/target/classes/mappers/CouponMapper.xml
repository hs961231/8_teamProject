<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="yjc.wdb.mapper.CouponMapper">

	<!-- 쿠폰 등록 -->
	<insert id="insertCoupon">
		insert into COUPON
		(COUPON_NM, COUPON_CNTNTS,
		COUPON_DSCNT, COUPON_BEGIN_DE, COUPON_END_DE)
		values (#{coupon_nm},
		#{coupon_cntnts}, #{coupon_dscnt}, #{coupon_begin_de},
		#{coupon_end_de})
	</insert>
	
	<!-- 전체 쿠폰 리스트 출력 -->
	<select id="selectCouponList" resultType="CouponVO">
		select
			*
		from
			coupon
	</select>
	
	<!-- 쿠폰 수정 -->
	<update id="updateCoupon">
		update coupon set coupon_nm =#{coupon_nm}, coupon_cntnts =#{coupon_cntnts},
		coupon_dscnt = #{coupon_dscnt}, coupon_begin_de = #{coupon_begin_de}, coupon_end_de = #{coupon_end_de}
		where coupon_code = #{coupon_code};
	</update>
	
	<!-- 쿠폰 삭제 -->
	<delete id="deleteCoupon">
		delete from coupon where coupon_code = #{coupon_code};
	</delete>
	
	<!-- 고객에게 쿠폰 전송 -->
	<select id="selectSendAndroidCoupon" resultType="CouponVO">
		select
			*
		from
			coupon
		limit 0,1
	</select>

	<!-- 쿠폰 바구니 들고있는 목록 -->
	<select resultType="CouponVO" id="couponList"> 
		select * from coupon_hold ch, coupon c where
		ch.user_id = #{user_id} and ch.COUPONHOLD_USE_AT = 'no' and ch.coupon_code = c.coupon_code
	</select>

	<delete id="delCouponBasket"> 
		delete from coupon_hold 
		where user_id = #{user_id}
		and coupon_code = #{coupon_code}; </delete>

	<!-- <update id=""> </update> <delete id="" > </delete> <select id="" resultType=""> 
		</select> -->


</mapper>